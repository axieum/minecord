plugins {
    id 'com.github.johnrengelman.shadow' version '7.1.2'
}

apply plugin: 'com.github.johnrengelman.shadow'
configurations { shadow; implementation.extendsFrom shadow }

// Declare dependencies
dependencies {
    implementation project(path: ':minecord-api', configuration: 'shadow')
    shadow "io.github.java-diff-utils:java-diff-utils:${project.java_diff_utils_version}"
}

// Produce a fat-jar of all the shaded dependencies
shadowJar {
    archiveClassifier.set('dev')
    configurations = [project.configurations.shadow]
}

// Provide the fat-jar to Fabric's remapping task
remapJar {
    dependsOn tasks.shadowJar
    inputFile.set(tasks.shadowJar.archiveFile)
}
